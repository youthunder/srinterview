<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="theme-color" content="#3498db">
    <title>사량이의 ⭐합격⭐을 위한 면접 연습기 [가천대학교 법학과]</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700&display=swap');
        
        body {
            font-family: 'Noto Sans KR', '나눔고딕', 'NanumGothic', sans-serif;
            background-image: url('https://upload.wikimedia.org/wikipedia/commons/thumb/e/ed/Gachon.jpg/500px-Gachon.jpg');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            min-height: 100vh;
            position: relative;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.7);
            z-index: -1;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            background: rgba(255, 255, 255, 0.9);
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .header h1 {
            color: #2c3e50;
            font-family: 'juac', 'Noto Sans KR', '나눔고딕', 'NanumGothic', sans-serif;
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
            font-weight: 700;
        }

        .header .subtitle {
            color: #7f8c8d;
            font-size: 1.2em;
            font-weight: 500;
        }

        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .control-group {
            display: flex;
            gap: 10px;
            align-items: center;
            background: rgba(255, 255, 255, 0.9);
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .timer {
            font-size: 1.5em;
            font-weight: bold;
            color: #e74c3c;
            min-width: 120px;
            text-align: center;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            -webkit-tap-highlight-color: transparent;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            touch-action: manipulation;
        }

        .btn-primary {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
        }

        .btn-primary:hover {
            background: linear-gradient(135deg, #2980b9, #1f618d);
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(52, 152, 219, 0.4);
        }

        .btn-success {
            background: linear-gradient(135deg, #27ae60, #229954);
            color: white;
        }

        .btn-success:hover {
            background: linear-gradient(135deg, #229954, #1e8449);
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(39, 174, 96, 0.4);
        }

        .btn-warning {
            background: linear-gradient(135deg, #f39c12, #e67e22);
            color: white;
        }

        .btn-warning:hover {
            background: linear-gradient(135deg, #e67e22, #d35400);
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(243, 156, 18, 0.4);
        }

        .btn-danger {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
        }

        .btn-danger:hover {
            background: linear-gradient(135deg, #c0392b, #a93226);
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(231, 76, 60, 0.4);
        }

        .btn-info {
            background: linear-gradient(135deg, #8e44ad, #9b59b6);
            color: white;
        }

        .btn-info:hover {
            background: linear-gradient(135deg, #9b59b6, #8e44ad);
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(142, 68, 173, 0.4);
        }

        .mode-selector {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .mode-btn {
            padding: 12px 24px;
            border: 2px solid #3498db;
            background: white;
            color: #3498db;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            -webkit-tap-highlight-color: transparent;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            touch-action: manipulation;
        }

        .mode-btn.active {
            background: #3498db;
            color: white;
            transform: scale(1.05);
        }

        .mode-btn:hover {
            background: #3498db;
            color: white;
            transform: scale(1.05);
        }

        .flashcard-container {
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
        }

        .flashcard {
            width: 100%;
            max-width: 800px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            overflow: hidden;
            transform-style: preserve-3d;
            transition: transform 0.6s;
        }

        .flashcard.flipped {
            transform: rotateY(180deg);
        }

        .card-front, .card-back {
            padding: 40px;
            min-height: 400px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            backface-visibility: hidden;
        }

        .card-back {
            transform: rotateY(180deg);
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
        }

        .question-number {
            font-size: 1.2em;
            color: #7f8c8d;
            margin-bottom: 20px;
            font-weight: 600;
        }

        .question {
            font-size: 1.8em;
            color: #2c3e50;
            line-height: 1.6;
            margin-bottom: 30px;
            font-weight: 600;
        }

        .reveal-section {
            margin-bottom: 20px;
        }

        .reveal-buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .reveal-btn {
            background: linear-gradient(135deg, #9b59b6, #8e44ad);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 15px;
            transition: all 0.3s ease;
            width: 100%;
            -webkit-tap-highlight-color: transparent;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            touch-action: manipulation;
        }

        .reveal-btn:hover {
            background: linear-gradient(135deg, #8e44ad, #7d3c98);
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(155, 89, 182, 0.4);
        }

        .revealed-content {
            background: rgba(155, 89, 182, 0.1);
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid #9b59b6;
            margin-top: 15px;
            display: none;
        }

        .revealed-content.show {
            display: block;
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .keywords {
            margin-bottom: 20px;
        }

        .keywords h3 {
            color: #e74c3c;
            margin-bottom: 10px;
            font-size: 1.3em;
        }

        .keyword-list {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .keyword {
            background: #e74c3c;
            color: white;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 14px;
            font-weight: 600;
        }

        .answer h3 {
            color: #27ae60;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .answer-text {
            color: #2c3e50;
            line-height: 1.8;
            font-size: 1.1em;
        }

        .navigation {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .nav-btn {
            padding: 15px 30px;
            font-size: 16px;
            font-weight: 600;
            border-radius: 10px;
            min-width: 120px;
            -webkit-tap-highlight-color: transparent;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            touch-action: manipulation;
        }

        .progress-info {
            text-align: center;
            background: rgba(255, 255, 255, 0.9);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #ecf0f1;
            border-radius: 4px;
            overflow: hidden;
            margin-top: 10px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #3498db, #2ecc71);
            transition: width 0.3s ease;
        }

        .bookmark-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            background: #f39c12;
            color: white;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 20px;
            transition: all 0.3s ease;
            z-index: 10;
            -webkit-tap-highlight-color: transparent;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            touch-action: manipulation;
        }

        .bookmark-btn.bookmarked {
            background: #e74c3c;
        }

        .bookmark-btn:hover {
            transform: scale(1.1);
        }

        .bookmark-btn:active {
            transform: scale(0.95);
        }

        .stats {
            display: flex;
            justify-content: space-around;
            background: rgba(255, 255, 255, 0.9);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .stat-item {
            text-align: center;
        }

        .stat-number {
            font-size: 2em;
            font-weight: bold;
            color: #3498db;
        }

        .stat-label {
            color: #7f8c8d;
            font-size: 0.9em;
            margin-top: 5px;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2em;
            }
            
            .controls {
                flex-direction: column;
                align-items: center;
            }
            
            .control-group {
                flex-direction: column;
                gap: 10px;
            }
            
            .mode-selector {
                flex-direction: column;
                align-items: center;
            }
            
            .question {
                font-size: 1.5em;
            }
            
            .card-front, .card-back {
                padding: 20px;
                min-height: 300px;
            }
            
            .navigation {
                flex-wrap: wrap;
            }
            
            .bookmark-btn {
                width: 60px;
                height: 60px;
                font-size: 24px;
                top: 15px;
                right: 15px;
            }
            
            .btn {
                padding: 12px 24px;
                font-size: 16px;
                min-height: 48px;
                -webkit-tap-highlight-color: transparent;
                touch-action: manipulation;
            }
            
            .mode-btn {
                padding: 15px 30px;
                font-size: 16px;
                min-height: 48px;
                -webkit-tap-highlight-color: transparent;
                touch-action: manipulation;
            }
            
            .reveal-btn {
                padding: 18px 30px;
                font-size: 18px;
                min-height: 56px;
                -webkit-tap-highlight-color: transparent;
                touch-action: manipulation;
            }
            
            .nav-btn {
                padding: 18px 30px;
                font-size: 18px;
                min-height: 56px;
                -webkit-tap-highlight-color: transparent;
                touch-action: manipulation;
            }
            
            .flashcard {
                margin: 0 10px;
            }
            
            .stats {
                flex-direction: column;
                gap: 15px;
            }
            
            .stat-item {
                padding: 10px;
            }
        }

        @media (max-width: 480px) {
            .container {
                padding: 10px;
            }
            
            .header h1 {
                font-size: 1.8em;
                line-height: 1.2;
            }
            
            .header .subtitle {
                font-size: 1em;
            }
            
            .question {
                font-size: 1.3em;
                line-height: 1.4;
            }
            
            .card-front, .card-back {
                padding: 15px;
                min-height: 250px;
            }
            
            .bookmark-btn {
                width: 50px;
                height: 50px;
                font-size: 20px;
            }
            
            .btn {
                padding: 10px 20px;
                font-size: 14px;
            }
            
            .mode-btn {
                padding: 12px 24px;
                font-size: 14px;
            }
            
            .reveal-btn {
                padding: 15px 25px;
                font-size: 16px;
            }
            
            .nav-btn {
                padding: 15px 25px;
                font-size: 16px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>사량이의 ⭐합격⭐을 위한 면접 연습기</h1>
            <div class="subtitle">[가천대학교 법학과]</div>
        </div>

        <div class="controls">
            <div class="control-group">
                <div class="timer" id="timer">00:00</div>
                <button class="btn btn-success" id="startBtn">시작</button>
                <button class="btn btn-warning" id="pauseBtn" disabled>일시정지</button>
                <button class="btn btn-danger" id="resetBtn">초기화</button>
            </div>
        </div>

        <div class="mode-selector">
            <button class="mode-btn active" data-mode="sequential">번호순</button>
            <button class="mode-btn" data-mode="reverse">역순</button>
            <button class="mode-btn" data-mode="random">랜덤</button>
            <button class="mode-btn" data-mode="bookmark">북마크</button>
        </div>

        <div class="stats">
            <div class="stat-item">
                <div class="stat-number" id="currentQuestion">1</div>
                <div class="stat-label">현재 문제</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" id="totalQuestions">22</div>
                <div class="stat-label">총 문제</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" id="bookmarkCount">0</div>
                <div class="stat-label">북마크</div>
            </div>
        </div>

        <div class="progress-info">
            <div>진행률: <span id="progressText">0%</span></div>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill" style="width: 0%"></div>
            </div>
        </div>

        <div class="navigation">
            <button class="btn btn-info nav-btn" id="firstBtn">🏠 처음으로</button>
            <button class="btn btn-primary nav-btn" id="prevBtn">⬅️ 이전 문제</button>
            <button class="btn btn-primary nav-btn" id="nextBtn">다음 문제 ➡️</button>
        </div>

        <div class="flashcard-container">
            <div class="flashcard" id="flashcard">
                <button class="bookmark-btn" id="bookmarkBtn">★</button>
                <div class="card-front">
                    <div class="question-number" id="questionNumber">문제 1</div>
                    <div class="question" id="questionText">문제가 여기에 표시됩니다.</div>
                    <div class="reveal-section">
                        <div class="reveal-buttons">
                            <button class="reveal-btn" id="revealKeywordsBtn">핵심 키워드 보기</button>
                            <button class="reveal-btn" id="revealAnswerBtn">예시 답변 보기</button>
                        </div>
                        <div class="revealed-content" id="keywordsContent">
                            <div class="keywords">
                                <h3>핵심 키워드</h3>
                                <div class="keyword-list" id="keywordList"></div>
                            </div>
                        </div>
                        <div class="revealed-content" id="answerContent">
                            <div class="answer">
                                <h3>예시 답변</h3>
                                <div class="answer-text" id="answerText"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 문제 데이터
        const questions = [
            {
                id: 1,
                question: "경찰 조직 내 자살 문제를 주제로 탐구했다고 했는데, 핵심 원인과 해결 방안을 간단히 설명해 보세요.",
                keywords: ["과중한 업무", "사건 트라우마", "상담 이용 낙인", "마음동행센터", "인력 확충", "교대근무 정상화"],
                answer: "과중한 업무와 사건 트라우마, 상담 이용에 대한 낙인 우려가 주요 원인이었습니다. 단기적으로는 마음동행센터 같은 기존 인프라의 상담 인력 확충과 상담 시간을 근무시간으로 인정하는 제도 보완이 필요하고, 중장기적으로는 인력 충원과 교대근무 정상화가 병행되어야 한다고 봅니다. [출처: 3학년 자율활동]",
                subQuestions: [
                    {
                        id: "1-1",
                        question: "지금 당장 실행 가능한 조치 한 가지만 고른다면 무엇이며, 효과를 어떻게 측정하겠습니까?",
                        keywords: ["상담 인력 확충", "상담 대기기간", "이용률", "우울·번아웃 지표", "핵심 성과지표"],
                        answer: "상담 인력 확충입니다. 상담 대기기간, 이용률, 3개월·6개월 추적 우울·번아웃 지표 변화를 핵심 성과지표로 두겠습니다. [출처: 3학년 화법과 작문]"
                    },
                    {
                        id: "1-2",
                        question: "상담 접근성을 높이기 위해 조직 문화 측면에서 필요한 장치는 무엇일까요?",
                        keywords: ["관리자 교육", "이용 독려", "비밀보장", "인사 불이익 금지", "익명 피드백 시스템"],
                        answer: "관리자 교육을 통한 이용 독려, 상담 이용 비밀보장 및 인사 불이익 금지의 명문화, 이용자 익명 피드백 시스템이 필요합니다. [출처: 3학년 화법과 작문]"
                    }
                ]
            },
            {
                id: 2,
                question: "청소년의 SNS 이용 규제 필요성을 주장했는데, 표현의 자유와의 충돌은 어떻게 조정해야 할까요?",
                keywords: ["미성년 보호", "표현의 자유", "최소침해 원칙", "법익균형", "유해콘텐츠 필터링", "시간 제한"],
                answer: "미성년 보호라는 공익과 표현의 자유를 최소침해와 법익균형 원칙으로 조정해야 합니다. 계정 삭제 같은 과도한 제한보다 유해콘텐츠 필터링과 시간 제한 같은 단계적 조치가 정당화됩니다. [출처: 3학년 진로활동]",
                subQuestions: [
                    {
                        id: "2-1",
                        question: "규제 강도를 정량화할 기준을 하나 설계해 본다면요?",
                        keywords: ["청소년 노출지수", "유해 키워드 빈도", "시청시간", "연령확인 정확도", "임계치", "보호장치 의무 가동"],
                        answer: "플랫폼별 청소년 노출지수(유해 키워드 빈도, 시청시간, 연령확인 정확도)를 산출하고 임계치 초과 시 보호장치 의무 가동을 법제화하겠습니다. [출처: 3학년 진로활동]"
                    },
                    {
                        id: "2-2",
                        question: "시간 제한이 학습권과 충돌할 때는 어떻게 예외를 두시겠습니까?",
                        keywords: ["인증형 학습 플랫폼", "교사 인증 계정", "화이트리스트", "학습용 트래픽", "별도 카운트"],
                        answer: "인증형 학습 플랫폼·교사 인증 계정을 화이트리스트로 분류해 학습용 트래픽은 별도 카운트로 관리합니다. [출처: 3학년 진로활동]"
                    }
                ]
            },
            {
                id: 3,
                question: "1학년 때 심신미약 감형 문제를 제기하며 국민신문고에 의견을 냈습니다. 개정 방향 핵심은 무엇이었나요?",
                keywords: ["책임능력", "사전 약물 남용", "모의성", "엄격한 심리", "감형 요건 협소화", "피해자 보호", "책임주의"],
                answer: "사건 전후의 책임능력, 사전 약물 남용 여부, 모의성 등을 엄격히 심리해 감형 요건을 협소화하자는 것입니다. 일률적 감형을 지양하고 피해자 보호와 책임주의를 균형 있게 반영하려 했습니다. [출처: 1학년 국어(1학기)]",
                subQuestions: [
                    {
                        id: "3-1",
                        question: "형법상 책임능력 판단과 어떻게 연결됩니까?",
                        keywords: ["사물변별능력", "행위통제능력", "의학적·행동학적 자료", "현저 저하", "제한적 고려"],
                        answer: "사물변별능력과 행위통제능력을 의학적·행동학적 자료로 구체 심리해 현저 저하가 입증된 경우에 한해 제한적으로 고려하자는 취지입니다. [출처: 1학년 국어(1학기)]"
                    }
                ]
            },
            {
                id: 4,
                question: "공직자 윤리와 경찰의 도덕적 책무를 탐구했다고 했습니다. 법학 지원자로서 공정성을 어떻게 정의하고, 현장에서 어떻게 검증합니까?",
                keywords: ["동일 기준", "일관 적용", "이해충돌 배제", "사건배당 기록 공개", "사전신고", "외부감사", "내부감찰"],
                answer: "공정성은 동일 기준의 일관 적용과 이해충돌 배제입니다. 사건배당 기록 공개, 이해충돌 사전신고, 외부감사·내부감찰을 통해 검증해야 합니다. [출처: 3학년 생활과 윤리]",
                subQuestions: [
                    {
                        id: "4-1",
                        question: "원 스트라이크 아웃 제도의 한계와 보완은요?",
                        keywords: ["위축효과", "오판 위험", "엄격한 사실심리", "적법절차 보장", "비위 유형별 차등화"],
                        answer: "위축효과와 오판 위험이 있어 엄격한 사실심리, 적법절차 보장, 비위 유형별 차등화가 필요합니다. [출처: 3학년 생활과 윤리]"
                    }
                ]
            },
            {
                id: 5,
                question: "사형제에 찬성 논증을 했는데, 반대 논거를 스스로 최적으로 제시하고 반박해 보세요.",
                keywords: ["오판 가능성", "일반예방 효과", "증거법·포렌식 고도화", "다심제 심리", "특수예방", "응보정의", "제한적 유지"],
                answer: "반대 논거는 오판 가능성과 일반예방 효과 불확실성입니다. 이에 대해 증거법·포렌식 고도화와 다심제 심리로 오판 위험을 낮추고, 극악범죄에 한정해 특수예방과 응보정의를 고려하는 제한적 유지가 가능하다고 봅니다. [출처: 3학년 생활과 윤리]",
                subQuestions: [
                    {
                        id: "5-1",
                        question: "입학 후 연구 결과에 따라 입장이 바뀐다면요?",
                        keywords: ["집행오류", "효과성 증거", "무기형 대체", "증거 중심", "입장 수정"],
                        answer: "집행오류·효과성 증거를 더 학습해 무기형 대체가 더 합리적이면 증거 중심으로 입장을 수정하겠습니다. [출처: 3학년 생활과 윤리]"
                    }
                ]
            },
            {
                id: 6,
                question: "DNA 감식 심화 발표를 했습니다. 개인정보·인권 침해를 줄이는 핵심 장치는 무엇입니까?",
                keywords: ["채취·보관 단계 분리", "익명화·암호화", "목적 외 사용 금지", "보관기간 자동 폐기", "사전영장 원칙", "독립 감독기구"],
                answer: "채취·보관 단계 분리와 익명화·암호화, 목적 외 사용 금지, 보관기간 자동 폐기, 사전영장 원칙과 독립 감독기구가 핵심입니다. [출처: 2학년 생명과학Ⅰ(2학기)]",
                subQuestions: [
                    {
                        id: "6-1",
                        question: "미제사건 해결을 위한 유전가계 데이터 활용에 대한 입장은요?",
                        keywords: ["사전 명시 동의", "친족 비식별화", "중대범죄 한정", "사용 이력 감사", "정당화"],
                        answer: "사전 명시 동의, 친족 비식별화, 중대범죄 한정, 사용 이력 감사가 전제될 때에만 정당화된다고 봅니다. [출처: 2학년 생명과학Ⅰ(2학기)]"
                    }
                ]
            },
            {
                id: 7,
                question: "O.J. 심슨 사건을 통해 조건부확률의 함정을 탐구했습니다. 법정에서 통계 남용을 막는 실무적 장치 한 가지는?",
                keywords: ["전문가 진술", "사전확률", "기저율", "사후확률", "분리 설명", "우도비", "설명보충 절차"],
                answer: "전문가 진술 시 사전확률(기저율)과 사후확률을 분리 설명하도록 의무화하고, 재판부가 우도비·기저율을 구분 이해하도록 설명보충 절차를 제도화합니다. [출처: 3학년 확률과 통계]",
                subQuestions: [
                    {
                        id: "7-1",
                        question: "P(유죄|증거)와 P(증거|유죄)의 혼동을 한 문장으로 설명해 보세요.",
                        keywords: ["유죄일 확률", "유죄일 때 그 증거가 나올 확률", "기저율", "대립가설 고려"],
                        answer: "유죄일 확률과 유죄일 때 그 증거가 나올 확률은 다르며, 전자는 기저율과 대립가설 고려가 필수입니다. [출처: 3학년 확률과 통계]"
                    }
                ]
            },
            {
                id: 8,
                question: "한·미 소년법 비교 에세이를 작성했습니다. 우리 제도의 강점과 보완점을 하나씩만 꼽아보세요.",
                keywords: ["보호주의 원칙", "교정·교육 중심", "연령 기준", "성인이송 요건", "예측 가능성", "재범위험 평가도구", "표준화"],
                answer: "강점은 보호주의 원칙에 따른 교정·교육 중심 접근, 보완점은 연령 기준과 성인이송 요건의 예측 가능성 제고 및 재범위험 평가도구의 표준화입니다. [출처: 2학년 영어권 문화]",
                subQuestions: [
                    {
                        id: "8-1",
                        question: "촉법소년 연령 하향에 대한 본인 입장은?",
                        keywords: ["조건부 하향", "범죄 중대성", "반복성", "판단능력 평가", "부작용"],
                        answer: "조건부 하향 찬성입니다. 범죄 중대성·반복성과 판단능력 평가를 결합해야 부작용을 줄일 수 있다고 봅니다. [출처: 2학년 진로활동(법탐구 프로그램)]"
                    }
                ]
            },
            {
                id: 9,
                question: "브라질 파벨라 치안정책과 총기범죄를 탐구했습니다. 국내 적용 가능한 커뮤니티 폴리싱 한 가지를 제안해 보세요.",
                keywords: ["자율방범 활동", "지역경찰 협업", "제도화", "생활범죄 사전조정", "데이터 기반 순찰 공개"],
                answer: "자율방범 활동과 지역경찰 협업을 제도화해 생활범죄 사전조정과 데이터 기반 순찰 공개를 도입하겠습니다. [출처: 2학년 세계지리, 2학년 영어권 문화(Neighborhood Watch 비교)]",
                subQuestions: [
                    {
                        id: "9-1",
                        question: "주민 참여를 끌어낼 인센티브는 무엇이 효과적일까요?",
                        keywords: ["참여 마일리지", "보험료 소액 할인", "지역 포인트 연계", "비금전·소액금전 인센티브", "혼합"],
                        answer: "참여 마일리지, 보험료 소액 할인, 지역 포인트 연계 등 비금전·소액금전 인센티브의 혼합이 현실적입니다. [출처: 2학년 세계지리]"
                    }
                ]
            },
            {
                id: 10,
                question: "플라톤 국가를 심화 독서했습니다. 그 정의 개념을 현대 헌법 질서의 정의 관념과 어떻게 연결합니까?",
                keywords: ["각자 할 일", "기본권 보장", "권력통제", "절차적 정당성", "실체적 정의", "절차적 정의", "균형"],
                answer: "플라톤의 각자 할 일로서의 정의는 현대에선 기본권 보장과 권력통제, 절차적 정당성으로 재해석됩니다. 실체적 정의와 절차적 정의의 균형을 지향하겠습니다. [출처: 2학년 윤리와 사상(고전독서탐구)]",
                subQuestions: [
                    {
                        id: "10-1",
                        question: "절차적 정의의 최소 요건을 한 문장으로 말해보세요.",
                        keywords: ["적법절차", "청문", "이유제시", "불복절차 보장", "최소 요건"],
                        answer: "적법절차, 청문, 이유제시, 불복절차 보장이 최소 요건입니다. [출처: 2학년 윤리와 사상]"
                    }
                ]
            },
            {
                id: 11,
                question: "범죄 피해자 가족 복지 서비스 발표에서 확인한 사각지대와 보완책을 말해보세요.",
                keywords: ["정보 접근의 어려움", "원스톱 포털", "연계기관 안내", "의무화", "지자체 전담 창구", "확충"],
                answer: "정보 접근의 어려움이 컸습니다. 원스톱 포털과 연계기관 안내 의무화, 지자체 전담 창구 확충이 필요합니다. [출처: 3학년 심리학(수업량 유연화 융합수업)]",
                subQuestions: [
                    {
                        id: "11-1",
                        question: "예산 제약이 있다면 우선순위는 무엇입니까?",
                        keywords: ["심리치료", "생계비", "직접 지원", "홍보·인프라", "단계적 확대"],
                        answer: "심리치료·생계비 같은 직접 지원을 우선하고, 이후 홍보·인프라를 단계적으로 확대합니다. [출처: 3학년 심리학]"
                    }
                ]
            },
            {
                id: 12,
                question: "본인의 ISTJ 성향이 법학·경찰행정 분야에 어떤 강점으로 작용합니까?",
                keywords: ["사실 기반 판단", "규범 준수", "체계적 기록", "증거·절차", "중시"],
                answer: "사실 기반 판단, 규범 준수, 체계적 기록에 강점이 있어 증거·절차를 중시하는 업무에 적합합니다. [출처: 3학년 심리학(MBTI 자기분석)]",
                subQuestions: [
                    {
                        id: "12-1",
                        question: "고집·경직이라는 단점은 어떻게 보완하나요?",
                        keywords: ["토론·세미나", "반대 논거", "스틸맨 연습", "인지적 유연성", "훈련"],
                        answer: "토론·세미나에서 반대 논거 스틸맨 연습을 통해 인지적 유연성을 훈련하겠습니다. [출처: 3학년 심리학]"
                    }
                ]
            },
            {
                id: 13,
                question: "법학을 공부하는 데 필요한 핵심 역량은 무엇이라고 생각하나요?",
                keywords: ["논리적 사고력", "공정한 판단력", "근거 중심의 사고", "객관적 판단", "정의로운 법 집행"],
                answer: "저는 법학을 공부하는 데 필요한 핵심 역량은 논리적 사고력과 공정한 판단력이라고 생각합니다. 법은 다양한 이해관계 속에서 올바른 결정을 내려야 하므로, 감정이 아닌 근거 중심의 사고가 중요합니다. 또 상황을 객관적으로 판단하는 태도가 정의로운 법 집행의 출발점이 된다고 생각합니다. [출처: 2026 대입 면접 전략 자료집(경남교육청) p.31]",
                subQuestions: [
                    {
                        id: "13-1",
                        question: "그 역량을 기르기 위해 어떤 노력을 해왔나요?",
                        keywords: ["청소년 조건만남 예방", "심신 미약 감형 법안", "논리적 사고력", "인과관계", "법적 근거", "사회적 영향"],
                        answer: "저는 2학년 사회 과제 연구 시간에 '청소년 조건만남 예방 및 치유 방안'을 주제로 보고서를 작성하며 논리적 사고력을 길렀습니다. 연구 과정에서 다양한 자료를 분석하고, 원인과 해결책을 인과관계 중심으로 정리하려 노력했습니다. 또 1학년 때는 '심신 미약 감형 법안의 문제점'을 주제로 토론을 진행하면서, 법적 근거와 사회적 영향 양쪽을 함께 고려하는 연습을 했습니다. 이런 활동을 통해 논리적인 사고와 공정한 판단력을 실제로 적용할 수 있었습니다. [출처: 2023-2025 대학별 면접 기출문제 정리(안양고 도창준) / 학생부 세부능력특기사항 – 사회 과제 연구, 국어 / 경남교육청 면접 자료집 p.32]"
                    }
                ]
            },
            {
                id: 14,
                question: "법과 정의가 충돌할 때 어떤 선택을 해야 한다고 생각하나요?",
                keywords: ["절차적 정의", "우선", "공정한 절차", "결과의 정당성", "확보"],
                answer: "저는 법과 정의가 충돌할 때 절차적 정의를 우선해야 한다고 생각합니다. 법이 정의를 실현하기 위한 도구라면, 그 도구가 공정한 절차를 거쳐야만 결과의 정당성이 확보된다고 생각합니다. [출처: 경남교육청 면접 전략 자료집 p.33]",
                subQuestions: [
                    {
                        id: "14-1",
                        question: "실제 사례를 들어 설명해볼 수 있을까요?",
                        keywords: ["심신미약 감형 법안", "발표", "책임능력 판단 절차", "다양한 시각", "절차적 공정성", "감정이 아닌 공정한 법적 절차"],
                        answer: "1학년 국어 시간에 '심신미약 감형 법안'에 대해 발표하며, 단순한 감정적 판단보다 책임능력 판단 절차의 중요성을 배웠습니다. 당시 저는 감형 폐지를 주장했지만, 토론을 통해 다양한 시각을 접하면서 절차적 공정성이 왜 중요한지 깨달았습니다. 이 경험을 통해 정의는 감정이 아니라 공정한 법적 절차에서 출발해야 한다는 점을 실감했습니다. [출처: 생활기록부 세부능력특기사항(1학년 국어) / 2026 대입 면접 전략 자료집 p.34]"
                    }
                ]
            },
            {
                id: 15,
                question: "최근 이슈 중에서 법의 역할이 중요했다고 생각하는 사건을 하나 말해보세요.",
                keywords: ["보이스피싱 범죄", "예방적 법 제도", "중요"],
                answer: "저는 '보이스피싱 범죄'가 법의 역할이 중요한 사건이라고 생각합니다. 단순한 처벌보다 예방적 법 제도가 중요하다는 것을 느꼈습니다. [출처: 전남교육청 면접자료 정리해DREAM p.45]",
                subQuestions: [
                    {
                        id: "15-1",
                        question: "그 사건에서 법의 한계나 문제점은 무엇이었다고 생각하나요?",
                        keywords: ["보이스피싱 범죄", "분석", "발표", "범죄 인식", "현행 법의 홍보", "실효성", "사전 예방 교육", "제도 홍보 강화"],
                        answer: "3학년 영어 수업 시간에 보이스피싱 범죄를 분석하고 발표했습니다. 피해자 대부분이 범죄를 인식하지 못한 채 피해를 입는다는 점에서, 현행 법의 홍보와 실효성이 부족하다는 문제를 느꼈습니다. 범죄자 단속보다 국민 대상 사전 예방 교육과 제도 홍보 강화가 법의 역할로 더 중요하다고 생각합니다. [출처: 생활기록부 세부능력특기사항(3학년 영어) / 2025 면접자료 정리해DREAM(전남교육청) p.47]"
                    }
                ]
            },
            {
                id: 16,
                question: "법학을 공부하며 가장 관심 있는 분야(예: 형법, 헌법 등)는 무엇인가요?",
                keywords: ["형법", "사회질서 유지", "정의 실현", "균형"],
                answer: "저는 형법에 가장 관심이 많습니다. 법학 중에서도 형법은 사회질서 유지와 정의 실현의 균형을 다루는 분야이기 때문입니다. [출처: 경기도교육청 면접자료집 p.27]",
                subQuestions: [
                    {
                        id: "16-1",
                        question: "그 분야를 통해 이루고 싶은 목표가 있나요?",
                        keywords: ["범죄 심리 탐구 보고서", "범죄의 원인", "재범 방지 대책", "피해자와 가해자", "시각", "범죄 예방", "피해자 보호", "경찰관"],
                        answer: "2학년 때 '범죄 심리 탐구 보고서'를 작성하며 범죄의 원인과 재범 방지 대책을 조사했습니다. 당시 피해자와 가해자 모두의 시각을 고려하려 노력하면서, 형법을 공부해 범죄 예방과 피해자 보호를 병행할 수 있는 경찰관이 되고 싶다고 생각했습니다. [출처: 생활기록부 세부능력특기사항(2학년 사회 과제 연구) / 2026 대입 면접 전략 자료집 p.36]"
                    }
                ]
            },
            {
                id: 17,
                question: "바람개비 전형에서 강조하는 '균형 잡힌 인재상'에 자신이 부합한다고 생각하는 이유는 무엇인가요?",
                keywords: ["학업과 인성", "진로탐구", "균형", "법·사회 문제", "심화탐구", "봉사활동", "조별 발표", "협업 능력", "책임감"],
                answer: "저는 학업과 인성, 진로탐구를 균형 있게 발전시켜 왔다고 생각합니다. 학업적으로는 법·사회 문제를 주제로 심화탐구를 진행했고, 인성 측면에서는 봉사활동과 조별 발표를 통해 협업 능력과 책임감을 길렀습니다. [출처: 전남교육청 면접자료집 p.42]",
                subQuestions: [
                    {
                        id: "17-1",
                        question: "그 균형을 유지하기 위해 노력한 경험이 있나요?",
                        keywords: ["범죄 피해자 가족 지원 제도", "조사", "학업과 봉사", "병행", "지역 아동센터 봉사", "지적 탐구", "공동체적 실천", "균형"],
                        answer: "3학년 심리학 수업에서 '범죄 피해자 가족 지원 제도'를 조사하며, 학업과 봉사를 병행했습니다. 당시 지역 아동센터 봉사를 꾸준히 하면서 동시에 보고서를 완성했고, 이를 통해 지적 탐구와 공동체적 실천의 균형이 중요하다는 것을 배웠습니다. [출처: 생활기록부 세부능력특기사항(3학년 심리학) / 전남교육청 면접자료집 p.44]"
                    }
                ]
            },
            {
                id: 18,
                question: "경찰과 법학의 관계를 본인의 진로와 연결해서 설명해보세요.",
                keywords: ["법을 현장에서 집행", "근거", "학문"],
                answer: "경찰은 법을 현장에서 집행하는 직업이기 때문에, 법학은 경찰의 판단과 행동에 근거가 되는 학문이라고 생각합니다. [출처: 경남교육청 면접전략 자료집 p.38]",
                subQuestions: [
                    {
                        id: "18-1",
                        question: "법학적 지식을 경찰 업무에 어떻게 활용할 수 있다고 생각하나요?",
                        keywords: ["법탐구 프로그램", "소년법과 형사정책", "비교 연구", "인권 보호", "재범 방지", "제도", "형법과 형사소송법", "절차적 정의", "수사 과정"],
                        answer: "2학년 법탐구 프로그램에 참여하면서 '소년법과 형사정책'을 비교 연구했습니다. 이를 통해 법이 단순히 처벌이 아니라 인권 보호와 재범 방지를 위한 제도라는 점을 배웠습니다. 형법과 형사소송법을 공부해 수사 과정에서 절차적 정의를 지키는 경찰이 되고 싶습니다. [출처: 생활기록부 세부능력특기사항(2학년 진로활동 – 법탐구 프로그램) / 2026 대입 면접전략 자료집(경남교육청) p.38]"
                    }
                ]
            },
            {
                id: 19,
                question: "성무선악설의 관점에서 범죄 문제를 해석했다고 하는데, 왜 성무선악설을 주장했나요?",
                keywords: ["선하거나 악한 본성", "타고남", "성장 환경", "사회적 경험", "형성", "정남규 연쇄살인사건", "유년기 학대", "방임", "범죄심리", "후천적 요인"],
                answer: "저는 모든 인간은 선하거나 악한 본성을 타고난 것이 아니라, 성장 환경과 사회적 경험을 통해 형성된다고 생각합니다. 1학년 '윤리와 사상' 수업 시간에 정남규 연쇄살인사건을 사례로 분석하면서, 범죄자의 유년기 학대와 방임이 범죄심리에 미친 영향을 탐구했습니다. 이 과정에서 인간의 행위는 후천적 요인에 의해 변화할 수 있다는 점을 실감했고, 그래서 성무선악설의 입장을 주장했습니다. [출처: 생활기록부 세부능력특기사항(1학년 윤리와 사상) / 경남교육청 「2026 대입 면접 전략 자료집」 p.33]",
                subQuestions: [
                    {
                        id: "19-1",
                        question: "그렇다면 동일한 환경에서도 범죄자가 되지 않는 사람들은 어떻게 설명할 수 있을까요?",
                        keywords: ["환경이 모든 것을 결정", "개인이 선택하는 방식", "사회적 지지망", "환경이 영향을 주지만", "개인의 판단", "주변의 제도적 지원", "함께 작용"],
                        answer: "환경이 모든 것을 결정한다고 보긴 어렵습니다. 같은 환경에서도 개인이 선택하는 방식과 사회적 지지망이 다릅니다. 따라서 환경이 영향을 주지만, 개인의 판단과 주변의 제도적 지원이 함께 작용한다고 생각합니다. [출처: 생활기록부 세부능력특기사항(1학년 윤리와 사상, 사회탐구 보고서)]"
                    }
                ]
            },
            {
                id: 20,
                question: "깨진 유리창 이론을 탐구했다고 했는데, 이 이론이 경찰 업무에 어떤 의미가 있다고 생각하나요?",
                keywords: ["작은 무질서", "방치", "더 큰 범죄", "경고", "청소년 조건만남 예방", "초기 단계", "개입", "예방 중심의 사고"],
                answer: "깨진 유리창 이론은 작은 무질서를 방치하면 더 큰 범죄로 이어질 수 있다는 경고입니다. 저는 2학년 사회 과제 연구에서 '청소년 조건만남 예방'을 주제로 연구했는데, 초기 단계에서의 개입이 얼마나 중요한지를 느꼈습니다. 이 경험을 통해 깨진 유리창 이론이 경찰에게는 경미한 범죄라도 조기에 대응하는 예방 중심의 사고가 필요하다는 것을 깨달았습니다. [출처: 생활기록부 세부능력특기사항(2학년 사회 과제 연구) / 전남교육청 「2025 면접자료 정리해DREAM」 p.45]",
                subQuestions: [
                    {
                        id: "20-1",
                        question: "이 이론을 적용해 우리 사회의 특정 문제를 개선할 수 있다면 어떤 사례가 있을까요?",
                        keywords: ["학교폭력 예방", "작은 언어폭력", "따돌림", "초기에 방치", "신체적 폭력", "확대", "사소한 갈등", "제도적으로 관리", "큰 범죄 예방"],
                        answer: "학교폭력 예방에 적용할 수 있다고 생각합니다. 작은 언어폭력이나 따돌림을 초기에 방치하면 신체적 폭력으로 확대될 수 있기 때문입니다. 따라서 학교 내 사소한 갈등부터 제도적으로 관리하는 것이 큰 범죄 예방으로 이어집니다. [출처: 생활기록부 세부능력특기사항(2학년 사회 과제 연구 – 청소년 문제 탐구)]"
                    }
                ]
            },
            {
                id: 21,
                question: "원 스트라이크 아웃제에 대해 탐구했다고 했는데, 이 제도에 찬성하는 이유는 무엇인가요?",
                keywords: ["공직 사회", "부정부패", "국민의 신뢰", "무너뜨리는", "심각한 문제", "위법행위", "즉각적으로 책임", "경찰", "국민의 신뢰", "높은 윤리 기준", "공정성과 책임성", "강화"],
                answer: "저는 공직 사회에서 부정부패는 국민의 신뢰를 무너뜨리는 심각한 문제라고 생각합니다. 따라서 한 번의 위법행위에도 즉각적으로 책임을 묻는 원 스트라이크 아웃제가 필요하다고 봅니다. 특히 경찰은 국민의 신뢰로 존재하는 직업이기 때문에, 높은 윤리 기준이 필수적입니다. 이 제도는 경찰조직이 스스로의 공정성과 책임성을 강화할 수 있는 방법이라고 생각합니다. [출처: 생활기록부 세부능력특기사항(3학년 생활과 윤리, 진로활동 경찰윤리 발표) / 경남교육청 면접전략 자료집 p.38]",
                subQuestions: [
                    {
                        id: "21-1",
                        question: "이 제도의 한계나 보완점이 있다면 무엇이라고 생각하나요?",
                        keywords: ["모든 위반행위", "같은 수준", "처리", "비례성의 원칙", "훼손", "위법의 정도", "경중을 구분", "사실관계", "명확히 입증", "장치"],
                        answer: "모든 위반행위가 같은 수준으로 처리되면 오히려 비례성의 원칙이 훼손될 수 있습니다. 따라서 위법의 정도에 따라 경중을 구분하고, 사실관계가 명확히 입증된 경우에만 적용하는 장치가 필요하다고 생각합니다. [출처: 생활기록부 세부능력특기사항(3학년 생활과 윤리 – 사회 규범 토론 활동)]"
                    }
                ]
            },
            {
                id: 22,
                question: "경찰공무원으로서 어떤 역할을 하고 싶은지, 구체적인 직무나 활동을 예로 들어 설명해 보세요.",
                keywords: ["실제 범죄 현장", "출동", "사건을 수사", "법의 원리", "판단", "형사과 경찰", "범죄 심리 탐구", "범죄자의 심리", "행동 패턴", "분석", "법적 절차", "인권 보호", "국민의 안전", "정당하게 집행"],
                answer: "저는 실제 범죄 현장에 출동해 사건을 수사하고, 법의 원리에 따라 판단하는 형사과 경찰이 되고 싶습니다. 2학년 때 '범죄 심리 탐구'를 진행하면서 범죄자의 심리와 행동 패턴을 분석했고, 이를 통해 수사과정에서도 법적 절차를 준수하면서 인권을 보호하는 경찰의 중요성을 느꼈습니다. 국민의 안전을 지키되, 법의 한계 안에서 정당하게 집행하는 경찰이 되고 싶습니다. [출처: 생활기록부 세부능력특기사항(2학년 사회 과제 연구 – 범죄심리탐구) / 전남교육청 면접자료 정리해DREAM p.46]",
                subQuestions: [
                    {
                        id: "22-1",
                        question: "경찰의 역할 중 '법 집행자'로서 가장 중요한 덕목은 무엇이라고 생각하나요?",
                        keywords: ["공정성", "법의 집행", "특정 감정", "편견", "영향", "객관적 근거", "판단", "토론 활동", "근거 중심의 사고훈련"],
                        answer: "저는 '공정성'이라고 생각합니다. 법의 집행이 특정 감정이나 편견에 영향을 받지 않기 위해서는 객관적 근거에 기반한 판단이 필요합니다. 이를 위해 저는 학교에서 토론 활동을 통해 항상 근거 중심의 사고훈련을 해왔습니다. [출처: 생활기록부 세부능력특기사항(1학년 국어 – 사회문제 토론활동) / 경남교육청 면접전략 자료집 p.37]"
                    }
                ]
            }
        ];

        // 전역 변수
        let currentMode = 'sequential';
        let currentIndex = 0;
        let currentQuestionSet = [];
        let bookmarkedQuestions = new Set();
        let timerInterval = null;
        let timeElapsed = 0;
        let isPaused = false;

        // DOM 요소들
        const timerElement = document.getElementById('timer');
        const startBtn = document.getElementById('startBtn');
        const pauseBtn = document.getElementById('pauseBtn');
        const resetBtn = document.getElementById('resetBtn');
        const modeButtons = document.querySelectorAll('.mode-btn');
        const questionNumberElement = document.getElementById('questionNumber');
        const questionTextElement = document.getElementById('questionText');
        const keywordListElement = document.getElementById('keywordList');
        const answerTextElement = document.getElementById('answerText');
        const keywordsContentElement = document.getElementById('keywordsContent');
        const answerContentElement = document.getElementById('answerContent');
        const revealKeywordsBtn = document.getElementById('revealKeywordsBtn');
        const revealAnswerBtn = document.getElementById('revealAnswerBtn');
        const bookmarkBtn = document.getElementById('bookmarkBtn');
        const currentQuestionElement = document.getElementById('currentQuestion');
        const totalQuestionsElement = document.getElementById('totalQuestions');
        const bookmarkCountElement = document.getElementById('bookmarkCount');
        const progressTextElement = document.getElementById('progressText');
        const progressFillElement = document.getElementById('progressFill');
        const firstBtn = document.getElementById('firstBtn');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');

        // 문제 세트 생성 함수
        function createQuestionSet() {
            const questionSet = [];
            
            questions.forEach(question => {
                // 메인 문제 추가
                questionSet.push({
                    ...question,
                    isMain: true,
                    displayId: question.id
                });
                
                // 서브 문제들 추가
                if (question.subQuestions) {
                    question.subQuestions.forEach(subQuestion => {
                        questionSet.push({
                            ...subQuestion,
                            isMain: false,
                            parentId: question.id,
                            displayId: subQuestion.id
                        });
                    });
                }
            });
            
            return questionSet;
        }

        // 문제 순서 설정 함수
        function setQuestionOrder() {
            const allQuestions = createQuestionSet();
            
            switch (currentMode) {
                case 'sequential':
                    currentQuestionSet = allQuestions;
                    break;
                case 'reverse':
                    // 역순으로 정렬하되 세트는 유지
                    const reversed = [];
                    for (let i = questions.length - 1; i >= 0; i--) {
                        const question = questions[i];
                        // 메인 문제와 서브 문제들을 함께 추가
                        reversed.push({
                            ...question,
                            isMain: true,
                            displayId: question.id
                        });
                        if (question.subQuestions) {
                            question.subQuestions.forEach(subQuestion => {
                                reversed.push({
                                    ...subQuestion,
                                    isMain: false,
                                    parentId: question.id,
                                    displayId: subQuestion.id
                                });
                            });
                        }
                    }
                    currentQuestionSet = reversed;
                    break;
                case 'random':
                    // 랜덤으로 섞되 세트는 유지
                    const shuffled = [];
                    const questionGroups = [];
                    
                    questions.forEach(question => {
                        const group = [{
                            ...question,
                            isMain: true,
                            displayId: question.id
                        }];
                        
                        if (question.subQuestions) {
                            question.subQuestions.forEach(subQuestion => {
                                group.push({
                                    ...subQuestion,
                                    isMain: false,
                                    parentId: question.id,
                                    displayId: subQuestion.id
                                });
                            });
                        }
                        
                        questionGroups.push(group);
                    });
                    
                    // 그룹들을 랜덤하게 섞기
                    for (let i = questionGroups.length - 1; i > 0; i--) {
                        const j = Math.floor(Math.random() * (i + 1));
                        [questionGroups[i], questionGroups[j]] = [questionGroups[j], questionGroups[i]];
                    }
                    
                    // 섞인 그룹들을 순서대로 추가
                    questionGroups.forEach(group => {
                        shuffled.push(...group);
                    });
                    
                    currentQuestionSet = shuffled;
                    break;
                case 'bookmark':
                    currentQuestionSet = allQuestions.filter(q => bookmarkedQuestions.has(q.displayId));
                    break;
            }
            
            currentIndex = 0;
            updateDisplay();
        }

        // 타이머 함수들
        function startTimer() {
            if (timerInterval) return;
            
            timerInterval = setInterval(() => {
                if (!isPaused) {
                    timeElapsed++;
                    updateTimerDisplay();
                }
            }, 1000);
        }

        function pauseTimer() {
            isPaused = !isPaused;
        }

        function resetTimer() {
            clearInterval(timerInterval);
            timerInterval = null;
            timeElapsed = 0;
            isPaused = false;
            updateTimerDisplay();
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeElapsed / 60);
            const seconds = timeElapsed % 60;
            timerElement.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        // 화면 업데이트 함수
        function updateDisplay() {
            if (currentQuestionSet.length === 0) {
                questionTextElement.textContent = "북마크된 문제가 없습니다.";
                return;
            }
            
            const currentQuestion = currentQuestionSet[currentIndex];
            
            questionNumberElement.textContent = `문제 ${currentIndex + 1} / ${currentQuestionSet.length}`;
            
            // 문제 번호 추가
            let questionNumber = '';
            if (currentQuestion.isMain) {
                questionNumber = `${currentQuestion.displayId}. `;
            } else {
                questionNumber = `${currentQuestion.displayId}. `;
            }
            
            questionTextElement.textContent = questionNumber + currentQuestion.question;
            
            // 키워드 표시
            keywordListElement.innerHTML = '';
            currentQuestion.keywords.forEach(keyword => {
                const keywordElement = document.createElement('span');
                keywordElement.className = 'keyword';
                keywordElement.textContent = keyword;
                keywordListElement.appendChild(keywordElement);
            });
            
            // 답변 표시
            answerTextElement.textContent = currentQuestion.answer;
            
            // 북마크 상태 업데이트
            updateBookmarkButton();
            
            // 통계 업데이트
            currentQuestionElement.textContent = currentIndex + 1;
            totalQuestionsElement.textContent = currentQuestionSet.length;
            bookmarkCountElement.textContent = bookmarkedQuestions.size;
            
            // 진행률 업데이트
            const progress = ((currentIndex + 1) / currentQuestionSet.length) * 100;
            progressTextElement.textContent = Math.round(progress) + '%';
            progressFillElement.style.width = progress + '%';
            
            // 네비게이션 버튼 상태 업데이트
            firstBtn.disabled = currentIndex === 0;
            prevBtn.disabled = currentIndex === 0;
            nextBtn.disabled = currentIndex === currentQuestionSet.length - 1;
            
            // 답변 숨기기
            keywordsContentElement.classList.remove('show');
            answerContentElement.classList.remove('show');
        }

        // 북마크 함수들
        function toggleBookmark() {
            const currentQuestion = currentQuestionSet[currentIndex];
            if (bookmarkedQuestions.has(currentQuestion.displayId)) {
                bookmarkedQuestions.delete(currentQuestion.displayId);
            } else {
                bookmarkedQuestions.add(currentQuestion.displayId);
            }
            updateBookmarkButton();
            bookmarkCountElement.textContent = bookmarkedQuestions.size;
        }

        function updateBookmarkButton() {
            const currentQuestion = currentQuestionSet[currentIndex];
            if (bookmarkedQuestions.has(currentQuestion.displayId)) {
                bookmarkBtn.classList.add('bookmarked');
                bookmarkBtn.textContent = '★';
            } else {
                bookmarkBtn.classList.remove('bookmarked');
                bookmarkBtn.textContent = '☆';
            }
        }

        // 네비게이션 함수들
        function goToFirst() {
            currentIndex = 0;
            updateDisplay();
        }

        function goToPrevious() {
            if (currentIndex > 0) {
                currentIndex--;
                updateDisplay();
            }
        }

        function goToNext() {
            if (currentIndex < currentQuestionSet.length - 1) {
                currentIndex++;
                updateDisplay();
            }
        }

        // 이벤트 리스너들
        startBtn.addEventListener('click', () => {
            startTimer();
            startBtn.disabled = true;
            pauseBtn.disabled = false;
        });

        pauseBtn.addEventListener('click', () => {
            pauseTimer();
            pauseBtn.textContent = isPaused ? '재개' : '일시정지';
        });

        resetBtn.addEventListener('click', () => {
            resetTimer();
            startBtn.disabled = false;
            pauseBtn.disabled = true;
            pauseBtn.textContent = '일시정지';
        });

        modeButtons.forEach(btn => {
            btn.addEventListener('click', () => {
                modeButtons.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                currentMode = btn.dataset.mode;
                setQuestionOrder();
            });
        });

        revealKeywordsBtn.addEventListener('click', () => {
            keywordsContentElement.classList.toggle('show');
        });

        revealAnswerBtn.addEventListener('click', () => {
            answerContentElement.classList.toggle('show');
        });

        // 북마크 버튼 이벤트 (모바일 최적화)
        bookmarkBtn.addEventListener('click', (e) => {
            e.preventDefault();
            e.stopPropagation();
            toggleBookmark();
        });

        // 터치 이벤트 추가 (모바일에서 더 안정적)
        bookmarkBtn.addEventListener('touchstart', (e) => {
            e.preventDefault();
        });

        bookmarkBtn.addEventListener('touchend', (e) => {
            e.preventDefault();
            e.stopPropagation();
            toggleBookmark();
        });

        firstBtn.addEventListener('click', goToFirst);
        prevBtn.addEventListener('click', goToPrevious);
        nextBtn.addEventListener('click', goToNext);

        // 키보드 단축키
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowLeft') goToPrevious();
            if (e.key === 'ArrowRight') goToNext();
            if (e.key === 'Home') goToFirst();
            if (e.key === ' ') {
                e.preventDefault();
                if (isPaused) {
                    pauseTimer();
                    pauseBtn.textContent = '일시정지';
                } else {
                    pauseTimer();
                    pauseBtn.textContent = '재개';
                }
            }
        });

        // 모바일 스와이프 제스처 지원
        let touchStartX = 0;
        let touchEndX = 0;

        document.addEventListener('touchstart', (e) => {
            touchStartX = e.changedTouches[0].screenX;
        });

        document.addEventListener('touchend', (e) => {
            touchEndX = e.changedTouches[0].screenX;
            handleSwipe();
        });

        function handleSwipe() {
            const swipeThreshold = 50;
            const diff = touchStartX - touchEndX;
            
            if (Math.abs(diff) > swipeThreshold) {
                if (diff > 0) {
                    // 왼쪽으로 스와이프 - 다음 문제
                    goToNext();
                } else {
                    // 오른쪽으로 스와이프 - 이전 문제
                    goToPrevious();
                }
            }
        }

        // 초기화
        setQuestionOrder();
    </script>
</body>
</html>
